<p align="center">
  <a href="https://github.com/gozargah/marzban" target="_blank" rel="noopener noreferrer">
    <picture>
      <source media="(prefers-color-scheme: dark)" srcset="https://user-images.githubusercontent.com/27927279/227711552-d2bc1089-5666-477b-9be7-d7e50a5286dc.png">
      <img width="200" height="200" src="https://user-images.githubusercontent.com/27927279/227711552-d2bc1089-5666-477b-9be7-d7e50a5286dc.png">
    </picture>
  </a>
</p>

<h1 align="center"/>WizWiz</h1>

<p align="center">
     فروش آسان با <a href="https://github.com/wizwizdev/wizwizxui-timebot">ویزویز</a> ، با چند کلیک به راحتی نصب کنید
</p>
<br/>
<p align="center">
    <a>
        <img src="https://img.shields.io/github/v/release/wizwizdev/wizwizxui-timebot.svg" />
    </a>
    <a>
        <img src="https://visitor-badge.glitch.me/badge?page_id=wizwizdev.wizwizdev" />
    </a>
    <a href="#">
        <img src="https://img.shields.io/github/license/wizwizdev/wizwizxui-timebot?style=flat-square" />
    </a>
    <a href="https://t.me/wizwizdev" target="_blank">
        <img src="https://img.shields.io/badge/telegram-group-blue?style=flat-square&logo=telegram" />
    </a>
    <a href="https://t.me/wizwizch" target="_blank">
        <img src="https://img.shields.io/badge/telegram-channel-blue?style=flat-square&logo=telegram" />
    </a>
</p>

<br>
    <a align="center">
        <img src="https://user-images.githubusercontent.com/27927279/230026376-100851a4-07b4-4695-aac2-3734643dac3f.PNG" />
    </a>     
<br>
  
<br>
    <a align="center">
        <img src="https://user-images.githubusercontent.com/27927279/230034487-bb9abde0-95d5-4b76-b0cb-b4cfa8fde604.png" />
    </a>     
<br>




## فهرست

- [پیش نیاز ( مرحله اول ) ](#پیش-نیاز-مرحله-اول) 
- [دانلود ( مرحله دوم ) ](#دانلود-مرحله-دوم) 
- [آپلود پروژه ( مرحله سوم ) ](#آپلود-پروژه-مرحله-سوم) 
- [ایجاد دیتابیس ( مرحله چهارم ) ](#ایجاد-دیتابیس-مرحله-چهارم) 
- [درگاه پرداخت ( مرحله پنجم ) ](#درگاه-پرداخت-مرحله-پنجم)
- [نصب ( مرحله ششم ) ](#نصب-مرحله-ششم) 
- [کرون جاب ( مرحله هفتم ) ](#کرون-جاب-مرحله-هفتم)
- [فایل htaccess](#فایل-htaccess)
- [خطاهای نصب](#خطاهای-نصب) 
- [نکات مهم](#نکات-مهم)
- [تنظیمات ربات](#تنظیمات-ربات)
- [پورت اشتراکی](#پورت-اشتراکی)
- [رفع ارور پنل](#رفع-ارور-پنل)
- [پنل های پشتیبانی شده](#پنل-های-پشتیبانی-شده)
- [حمایت](#حمایت)
- [امکانات ویزویز](#امکانات-ویزویز)


<br>


## پیش نیاز مرحله اول

- هاست cpanel یا سرور مجازی
- دامنه با ssl فعال

<br>

## دانلود مرحله دوم

- پروژه رو از طریق لینک زیر دانلود کنید

````
https://github.com/wizwizdev/wizwizxui-timebot/archive/refs/heads/main.zip
````

<br>


## آپلود پروژه مرحله سوم

- وارد هاست cpanel بشید
- پروژه را مستقیم داخل پوشه public_html که حالا روی دامین یا ساب دامینی که می خواهید نصب کنید آپلود کنید
- روی فایل zip آپلود شده کلیک کنید و گزینه Extract را بزنید تا از حالت فشرده خارج شود
- قبل از نصب حتما ورژن php روی 7.4 باشد برای تنظیم داخل هاست cpanel روی گزینه PHP Selector کلیک کنید و دامنه مربوط به ربات را تنظیم کنید  
- داخل هاست cpanel روی گزینه Select PHPVersion کلیک کنید و در بخش extension حتما Soap را فعال کنید


<br>


## ایجاد دیتابیس مرحله چهارم


- برای ایجاد دیتابیس لطفا روی [آموزش دیتابیس](DB.md) کلیک کنید



<br>


## درگاه پرداخت مرحله پنجم

- برای درگاه ارز NowPayment در سایت nowpayments.io با ایمیل ثبت نام کنید و API Keys را در فرم ثبت نامی ربات وارد کنید ( احراز هویت ندارد ) 
- برای درگاه زرین پال در سایت zarinpal.com ثبت نام کنید و کد مرچنت را در فرم ثبت نامی ربات وارد کنید ( احراز هویت دارد )


<br>


## نصب مرحله ششم

- یک ربات را در botfather ایجاد کنید و حتما حتما یک بار ربات را /strat کنید سپس مراحل پایین را انجام بدید
- برای نصب ربات از آدرس زیر را در مرورگر وارد کنید
- به جای yourdomain.com لطفا دامین یا ساب دامین هاستی که پروژه را آپلود کرده اید جایگزین کنید و در مرورگر اجرا کنید

````
https://yourdomain.com/wizwizxui-timebot-main/install/install.php
````

<br>

- روی دکمه نصب کلیک کنید

<br>

<p align="center">
    <a>
        <img src="https://user-images.githubusercontent.com/27927279/228797072-00d075f6-24d8-428b-9c5d-479aec9eabc9.PNG" />
    </a>
</p>

<br>

- سپس اطلاعات خواسته شده را وارد کنید و روی دکمه نصب ربات کلیک کنید تا مراحل نصب انجام شود
- اگر ربات را به درستی نصب کنید پیغام ( ربات با موفقیت نصب شد ) برای ربات ارسال می شود و تمام

<br>

## کرون جاب مرحله هفتم

- وارد هاست بشید سپس روی گزینه Cron Jobs کلید کنید و طبق تنظیمات زیر کرون جاب را تنظیم کنید
- در قسمت Common Settings حالت Once Per Minute(* * * * *) را انتخاب کنید
- در قسمت Command لطفا ادرس زیر را وارد کنید:


````
/usr/bin/php -q /home/wizwizro/public_html/wizwizxui-timebot-main/messagewizwiz.php >/dev/null 2>&1
````


- به جای wizwizro باید آدرس مورد نظرتون رو طبق تصویر زیر از هاست بردارید و وارد کنید 


<p align="center">
    <img src="https://user-images.githubusercontent.com/27927279/229339959-3da695e6-eee8-49b0-a520-37552d50090f.PNG" />
</p>



- برای هر کدام از فایل های warnusers.php - rewardReport.php - messagewizwiz.php باید کرون جاب جدا ایجاد کنید

<br>



## فایل htaccess

- بعد از Extract کردن فایل های پروژه احتمالا فایل htaccess برای شما قابل دیدن نباشد ابتدا گوشه سمت راست بالا بر روی Settings کلیک کنید
- در پنجره باز شده تیک گزینه Show Hidden Files (dotfiles) را فعال کنید و سپس save را بزنید الان شما میتوانید فایل را ببینید
- اگر با اینکار ردی از فایل htaccess پیدا نشد مجدد آپلود کنید 

<br>



## خطاهای نصب


#### خطای: دیتابیس امکان برقراری اتصال به دیتابیس نیست 

- اطلاعات نام کاربری یا نام یا پسورد دیتابیس اشتباه می باشد و باید اصلاح کنید


#### خطای: ربات باید روی دامنه ی دارای ssl فعال نصب بشه

- دامنه شما ssl ندارد و باید آن را فعال کنید



#### خطای: رباتی با این توکن یافت نشد

- این توکن اشتباه است و باید توکن را به درستی وارد کنید



#### خطای: فایل های مورد نیاز ربات یافت نشد

- ربات نمی تواند فایل createDB.php را پیدا کند از بودن آن داخل پروژه مطمئن باشید سپس نصب کنید 


### خطای: 500 بعد از نصب ربات

<br>
    <a align="center">
        <img src="https://user-images.githubusercontent.com/27927279/230745829-73c323f7-46ff-4680-8f86-25ab1f026734.PNG" />
    </a>     
<br>


##### داخل هاست cpanel روی گزینه Select PHPVersion کلیک کنید و در بخش extension گزینه های زیر را فعال کنید:
- pdo_mysql
- mysqlnd 
- nd_mysqli 
##### گزینه های زیر را غیر فعال کنید:
- mysqli
- nd_pdo_mysql 

##### گزینه زیر اگر به رنگ آبی بود لطفا فعال کنید:

<br>
    <a align="center">
        <img src="https://user-images.githubusercontent.com/27927279/230842783-16f6d1a5-e726-4533-a57b-98cb04fa8dfc.PNG" />
    </a>     
<br>






## نکات مهم

- بعد از نصب لطفا اسم فایل install.php را تغییر دهید تا کسی به ادرس نصب شما دسترسی نداشته باشد
- برای قفل اجباری کانال حتما ربات را مدیر کانال کنید و تمام دسترسی ها را فعال کنید
- قبل از نصب حتما ورژن php روی 7.4 باشد برای تنظیم داخل هاست cpanel روی گزینه PHP Selector کلیک کنید و دامنه مربوط به ربات را تنظیم کنید  
- داخل هاست cpanel روی گزینه Select PHPVersion کلیک کنید و در بخش extension حتما Soap را فعال کنید  
- برای استفاده از درگاه NowPayment حتما باید مبلغ شارژ بالای 3.5 دلار باشد چون پایین تر از 3.5 دلار قابل پرداخت نمی باشد  
- لوکیش هاست یا سرور لینوکس باید خارج از ایران باشد ( چون تلگرام در ایران فیلتر است )
- اگر از پروتکل تروجان استفاده می کنید پنل باید قابلیت ساخت تروجان را داشته باشد در غیر اینصورت پنل شما به مشکل میخورد
- اعتبار اعلان کانفیگ بعد از 2 روز صفر می شود ( یعنی اگر سرویس را تمدید کند اعلان اتمام مجدد فعال می شود )
- اگر حجم سرویس به یک گیگ و زمان به یک روز برسه برای کاربر اعلان ارسال می شود
- اگر کاربر تا 48 ساعت سرویس را تمدید نکند اعلان پاک شدن سرویس برای کاربر ارسال می شود و سرویس پاک می شود
- اگر موقع تنظیم کرون جاب پیام همگانی یا اعلان ارسال نشد ( هنگام تنظیم کرون جاب فقط ادرس دامنه را از داخل command پاک کنید )
- برای ایجاد کانفیگ تست قیمت را 0 قرار دهید ، هر اکانت فقط یک بار میتواند اکانت تست رایگان استفاده کند
- نوع پنل ( سنای و علیرضا ) برای سنایی نسخه 1.1.1 به بالا و علیرضا نسخه 0.4.2 کاربرد دارد
-  نوع پنل ( ساده ) برای نسخه سنایی 1.0.9 و پایین تر ، علیرضا 0.3.2 و پایین تر ، پنل چینی وکسیلو ، نیدوکا کاربرد دارد
-  برای استفاده از HTTP و Header در ربات باید مقدار Header Type رو مقدار http قرار بدید و برای request header هم مقدار Host:domain.ir وارد کنید
-  برای جلوگیری از فروش یک سرور می توانید موجودی سرور را 0 قرار بدید
-  برای تنظیم کانال اعلان درآمد روی آیدی داخل صفحه کلید شیشه ای کلیک کنید و کانال را مجدد تنظیم کنید
-  برای نصب مجدد ربات باید فایل ها رو از اول دانلود کنید ( فایل های قبلی کار نمی کند چون به فایل جدید به نام baseinfo.php دارید )



<br>

## تنظیمات ربات


#### برای ثبت سرور نکات زیر را رعایت کنید:

- از پورتی استفاده کنید که روی هاست این پورت باز باشد ، اگر مطمئن نیستید به پشتیبانی هاستینگ تیکت بدید و درخواست پورت های باز روی سرور را بدید که معمولا پورت 8080 روی اکثر هاستیگ ها باز می باشد
- اگر پنل شما دارای دامنه می باشد حتما باید ssl پنل فعال باشد و آن را با https شروع کنید
- اگر پنل شما دارای ای پی می باشد لطفا تنظیمات خود پنل را طبق تصویر زیر دوتا کادر را پاک کنید و پنل را ذخیره و ریستارت کنید و برای ثبت سرور در ربات باید به صورت http وارد کنید


<a align="center">
    <img src="https://user-images.githubusercontent.com/27927279/228873312-7ac5f12a-5d67-465f-a106-45a11f8f82ee.PNG" />
</a>   


<br>

#### تنظیم پروتکل و شبکه:


دقت کنید اگر تنظیمات tls - xtls رو اینطوری تنظیم می کنید ، هنگام ثبت پلن باید حتما این پروتکل و شبکه رو ایجاد کنید



- vless  `ws - tcp ( tls - xtls )`
- vmess  `ws - tcp ( tls - xtls )`
- vless  `Grpc ( tls )`
- vmess  `Grpc ( tls )`
- trojan  `tcp ( xtls )`





#### هنگام اضافه کردن سرور به ربات لطفا به صورت زیر آدرس وارد کنید




````
https://youdomain.com:54321
````

````
http://192.180.125:54321
````

````
https://youdomain.com:54321/path
````

#### آدرس زیر اشتباه می باشد

````
https://youdomain.com:54321/xui/inbounds
````

````
https://youdomain.com:54321/
````


<br>

#### تنظیم سرتیفیکیت داخل ربات


- tls: `{"serverName": "","certificates": [{"certificateFile": "","keyFile": ""}]}`


- xtls: `{"serverName": "","certificates": [{"certificateFile": "","keyFile": ""}],"alpn": []}`

مثال: 

- نکته مهم: بین آدرس ssl فاصله نزارید و بدون فاصله باشد در غیر اینصورت کل پنل x-ui از کار می افتد

- serverName: yourdomain.com
- certificateFile: /root/cert.crt
- keyFile: /root/private.key


````
{"serverName": "yourdomain.com","certificates": [{"certificateFile": "/root/cert.crt","keyFile": "/root/private.key"}]}
````

````
{"serverName": "yourdomain.com","certificates": [{"certificateFile": "/root/cert.crt","keyFile": "/root/private.key"}],"alpn": []}
````

<br>


## پورت اشتراکی


- با یک خروجی می توانید به اندازه دلخواه روی دامنه های مختلف کانفیگ تحویل بگیرید ( سابسکرایب برای اپراتورهای مختلف )
- جهت استفاده از پورت خاص یا اشتراکی ابتدا دستی یک کانفیگ با یه پورت خاص ایجاد کنید و در پلن اشتراکی ربات ، id سطر کانفیگ را به ربات بدید تا کانفیگ ها را به صورت خودکار روی پورت ایجاد کند


<br>

## رفع ارور پنل

- اگر با همچین خطایی مواجه شدین لطفا موارد زیر را با دقت انجام بدید


<br>


<p align="center">
    <a>
        <img src="https://user-images.githubusercontent.com/27927279/228843013-e06c3655-1fc9-44aa-a256-30d0d4a9a784.jpg" />
    </a>
</p>


<br>

- ابتدا نرم افزار Navicat یا DB Browser for SQLite را دانلود کنید ( نرم افزار Navicat باید کرک کنید ولی رابط کاربری قشنگی دارد ) 
- فایل دیتابیس پنل x-ui که با فرمت x-ui.db می باشد را از سرور که در مسیر etc/x-ui/x-ui.db است دانلود کنید
- فایل دیتابیس x-ui.db را وارد نرم افزار موردنظر کنید، سپس کانفیگ اخری را حذف کنید و پروژه را ذخیره کنید
- فایل جدید را داخل سرور آپلود کنید و یک بار پنل را ریستارت کنید مشکل برطرف می شود


<br>

## پنل های پشتیبانی شده


- ( نیدوکا کالانکا ) تک پورتی ، چند پورتی ( بهترین گزینه برای ربات )
```` 
bash <(curl -Ls https://raw.githubusercontent.com/NidukaAkalanka/x-ui-english/master/install.sh)
```` 
- ( سنایی ) چند پورتی - تک پورتی
```` 
bash <(curl -Ls https://raw.githubusercontent.com/mhsanaei/3x-ui/master/install.sh)
````   
```` 
bash <(curl -Ls https://raw.githubusercontent.com/mhsanaei/3x-ui/master/install.sh) v1.0.9
```` 
- ( علیرضا ) چند پورتی - تک پورتی
```` 
bash <(curl -Ls https://raw.githubusercontent.com/alireza0/x-ui/master/install.sh)
````   
```` 
bash <(curl -Ls https://raw.githubusercontent.com/alireza0/x-ui/master/install.sh) 0.4.0
```` 
- ( وکسیلو ) فقط تک پورتی
```` 
bash <(curl -Ls https://raw.githubusercontent.com/vaxilu/x-ui/master/install.sh)
```` 

- بقیه پنل ها تست نشدن ( لطفا خودتون تست کنید اگر اوکی بود بگید اینجا اضافه بشه )

<br>

## حمایت 


- بانک سپه: `5892101222351344`
- ترون (TRX): `TY8j7of18gbMtneB8bbL7SZk5gcntQEemG`
- بیت کوین: `bc1qcnkjnqvs7kyxvlfrns8t4ely7x85dhvz5gqge4`
- دوج کوین: `DMyGMghEh4W55P3VeVHntCN3vYAFtshvVH`


<br>


### امکانات ویزویز


- درگاه ارز nowpayments
- درگاه زرین پال
- پشتیبانی از شبکه Grpc - ws - tcp
- پشتیبانی از  xtls - tls 
- پشتیبانی از  flow - alpn
- قابلیت تمدید سرویس
- قابلیت ساخت کانفیگ با حجم مگابایت ( MB )
- قابلیت خروجی کانفیگ ( مناسب اپراتورهای مختلف یا همون سابسکرایب )
- قابلیت تغییر پروتکل ( vless - vmess- trojan ) توسط کاربر
- قابلیت تغییر نوع شبکه ( ws - tcp - grpc ) توسط کاربر
- تنظیم پورت کانفیگ به صورت رندم یا خودکار در ربات
- قابلیت ساخت اکانت به صورت تعدادی توسط ادمین
- کانفیگ تحویلی به کاربر با ( ایدی عددی تلگرام کاربر )
-  کیف پول ( قابلیت شارژ )
- قابلیت شارژ کیف پول توسط ادمین
- ارسال اعلان عضو جدید در ربات به ( ادمین )
- ارسال پیام به کاربر تازه عضو شده در ربات 
- نمایش تعداد خرید - موجودی - نام و .... به کاربر
- قابلیت ارسال پیام خصوصی ادمین به کاربر 
- قابلیت مشاهده آمار کاربران - سرورها - پلن ها - دسته ها ( ادمین )
- قابلیت مشاهده محصولات خریداری شده - درآمد کل ( ادمین )
- قابلیت مسدود و آزاد سازی کاربران از ربات
- اضافه یا حذف ادمین به صورت حرفه ای 
- نمایش موجودی سرورها برای ادمین و کاربر
- قابلیت خاموش / روشن کردن  ( ربات )
- قابلیت خاموش / روشن کردن  ( فروش )
- قابلیت خاموش / روشن کردن  ( مشخصات کانفیگ )
- قابلیت خاموش / روشن کردن  ( کارت به کارت )
- قابلیت خاموش / روشن کردن  ( کیف پول )
- قابلیت خاموش / روشن کردن  ( درگاه زرین پال )
- قابلیت خاموش / روشن کردن  ( ارز nowpayments )
- قابلیت ارسال گزارش درآمد با تنظیم ساعت در کانال تعریف شده
- قابلیت ارسال ( عکس - موزیک و ... ) در پیام همگانی
- قابلیت ویرایش نام - توضیحات - قیمت - ظرفیت کانفیگ ( سرورها و پلن ها )
- قابلیت دریافت کانفیگ های فروخته شده هر پلن به صورت جدا
- اضافه شدن دکمه برای هنگام تحویل کانفیگ به مشتری برای بازگشت
- فروش خودکار vless - vmess - trojan
- تنظیم و ایجاد کانفیگ با قابلیت:
- ( حجم - روز - شبکه - پروتکل - تک کاربره {بستگی به پنل دارد } )
- ایجاد سرور  و مدیریت:
- ( نام - پرچم - ریمارک - ظرفیت - header - request - request - tls - sni - ip )
- ایجاد دسته و مدیریت آن
- ایجاد پلن و مدیریت آن
- ایجاد کانفیگ پورت اشتراکی و پورت اختصاصی
- ایجاد کانفیگ تست برای کاربران ( قبل از خرید )
- قابلیت کارت به کارت جهت پرداخت ( تایید توسط مدیر )
- ارسال خودکار کانفیگ به همراه لینک + نام کانفیگ + qrcode برای کاربر
- مشاهده مشخصات کامل کانفیگ خریداری شده
- نمایش اکانت های فروخته شده هر پلن
- بخش سیستم تیکت پیشرفته ( تیکت طور )
- قابلیت نمایش ( لینک نرم افزارها )
- ارسال پیام همگانی با کرون جاب 
- اعلان اتمام حجم و زمان کانفیگ ( به کاربر )
- قفل اجباری کانال
- پشتیبانی پنل سنایی 
- پشتیبانی پنل علیرضا 
- پشتیبانی پنل وکسیلو
- پشتیبانی پنل نیدوکا 
- امکان ثبت کانفیگ به vless - vmess - uuid ( تروجان به خوبی پشتیبانی نمی کند )
- دریافت اطلاعات کانفیگ ( برای تک پورت و چند پورت )
- نمایش نام اکانت
- نمایش کلید ورودی  
- نمایش وضعیت
- نمایش حجم کلی
- نمایش مصرف دانلود
- نمایش مصرف آپلود 
- نمایش استفاده حجم کلی
- نمایش حجم باقیمانده
- نمایش تعداد روزهای باقی مانده
- نمایش تاریخ اتمام اشتراک

<br>


حتما داخل گروه و کانال جوین شین و از ما حمایت کنید 👇

## Contact Developer
💎 Group: https://t.me/wizwizdev
💎 Channel: https://t.me/wizwizdch


<br>
<br>

## Stargazers over time

[![Stargazers over time](https://starchart.cc/wizwizdev/wizwizxui-timebot.svg)](https://starchart.cc/wizwizdev/wizwizxui-timebot)
